<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Tendor</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

  <style>
    /*  import google fonts */
    @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap");

    * {
      margin: 0;
      padding: 0;
      outline: none;
      border: none;
      text-decoration: none;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      background: rgb(226, 226, 226);
    }

    nav {
      position: sticky;
      top: 0;
      bottom: 0;
      height: 100vh;
      left: 0;
      width: 90px;
      /* width: 280px; */
      background: #fff;
      overflow: hidden;
      transition: 1s;
    }

    nav:hover {
      width: 280px;
      transition: 1s;
    }

    .logo {
      text-align: center;
      display: flex;
      margin: 10px 0 0 10px;
      padding-bottom: 3rem;
    }

    .logo img {
      width: 45px;
      height: 45px;
      border-radius: 50%;
    }

    .logo span {
      font-weight: bold;
      padding-left: 15px;
      font-size: 18px;
      text-transform: uppercase;
    }

    a {
      position: relative;
      width: 280px;
      font-size: 14px;
      color: rgb(85, 83, 83);
      display: table;
      padding: 10px;
    }

    nav .fas {
      position: relative;
      width: 70px;
      height: 40px;
      top: 20px;
      font-size: 20px;
      text-align: center;
    }

    .nav-item {
      position: relative;
      top: 12px;
      margin-left: 10px;
    }

    a:hover {
      background: #eee;
    }

    a:hover i {
      color: #34AF6D;
      transition: 0.5s;
    }

    .logout {
      position: absolute;
      bottom: 0;
    }

    .container {
      display: flex;
    }

    /* MAin Section */
    .main {
      position: relative;
      padding: 20px;
      width: 100%;
    }

    .main-top {
      display: flex;
      width: 100%;
    }

    .main-top i {
      position: absolute;
      right: 0;
      margin: 10px 30px;
      color: rgb(110, 109, 109);
      cursor: pointer;
    }

    .main .users {
      display: flex;
      width: 100%;
    }

    .users {
      display: flex;
      flex-wrap: wrap;
      /* Allow the cards to wrap to the next row */
    }


    .users {
      display: flex;
      flex-wrap: wrap;
      /* Allow the cards to wrap to the next row */
    }

    .users .card {
      width: calc(33.3333% - 20px);
      /* Adjust width to accommodate three cards in a row with some spacing */
      margin: 10px;
      background: #fff;
      text-align: center;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 20px 35px rgba(0, 0, 0, 0.1);
    }




    .users .card img {
      width: 70px;
      height: 70px;
      border-radius: 50%;
    }

    .users .card h4 {
      text-transform: uppercase;
    }

    .users .card p {
      font-size: 12px;
      margin-bottom: 15px;
      text-transform: uppercase;
    }

    .users table {
      margin: auto;
    }

    .users .per span {
      padding: 5px;
      border-radius: 10px;
      background: rgb(223, 223, 223);
    }

    .users td {
      font-size: 14px;
      padding-right: 15px;
    }

    .users .card button {
      width: 100%;
      margin-top: 8px;
      padding: 7px;
      cursor: pointer;
      border-radius: 10px;
      background: transparent;
      border: 1px solid #4AD489;
    }

    .users .card button:hover {
      background: #4AD489;
      color: #fff;
      transition: 0.5s;
    }

    /*Attendance List serction  */
    .attendance {
      margin-top: 20px;
      text-transform: capitalize;
    }

    .attendance-list {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 20px 35px rgba(0, 0, 0, 0.1);
    }

    .table {
      border-collapse: collapse;
      margin: 25px 0;
      font-size: 15px;
      min-width: 100%;
      overflow: hidden;
      border-radius: 5px 5px 0 0;
    }

    table thead tr {
      color: #fff;
      background: #34AF6D;
      text-align: left;
      font-weight: bold;
    }

    .table th,
    .table td {
      padding: 12px 15px;
    }

    .table tbody tr {
      border-bottom: 1px solid #ddd;
    }

    .table tbody tr:nth-of-type(odd) {
      background: #f3f3f3;
    }

    .table tbody tr.active {
      font-weight: bold;
      color: #4AD489;
    }

    .table tbody tr:last-of-type {
      border-bottom: 2px solid #4AD489;
    }

    .table button {
      padding: 6px 20px;
      border-radius: 10px;
      cursor: pointer;
      background: transparent;
      border: 1px solid #4AD489;
    }

    .table button:hover {
      background: #4AD489;
      color: #fff;
      transition: 0.5rem;
    }

    .custom-styling {
      color: #fff;
      font-weight: bold;
      font-size: 15px;
      width: 100%;
      margin-top: 8px;
      padding: 7px;
      cursor: pointer;
      border-radius: 10px;
      background: #4AD489;
      border: 1px solid #4AD489;
    }

    .custom-styling:hover {
      background: transparent;
      color: #4AD489;
      transition: 0.5s;
    }

    .input-box {
      margin-bottom: 15px;
      width: 100%;
    }

    .input-box span.details {
      display: block;
      font-weight: 500;
      margin-bottom: 5px;
    }

    .input-box input {
      height: 45px;
      width: 100%;
      outline: none;
      font-size: 16px;
      border-radius: 5px;
      padding-left: 15px;
      border: 1px solid #ccc;
      transition: border-color 0.3s ease;
    }

    .input-box input:focus,
    .input-box input:valid {
      border-color: #4AD489;
    }
  </style>
</head>

<body>
  <div class="container">
    <nav>
      <ul>
        <li><a href="#" class="logo">
            <i class="fas fa-user-cog"></i>
            <br>
            <span class="nav-item">CTR.</span>
          </a></li>
        <li><a href="/client_dashboard">
            <i class="fas fa-menorah"></i>
            <span class="nav-item">Dashboard</span>
          </a></li>

        <li><a href="/client_qualification">
            <i class="fas fa-chart-bar"></i>
            <span class="nav-item">Qualification</span>
          </a></li>
        <li><a href="/" class="logout">
            <i class="fas fa-sign-out-alt"></i>
            <span class="nav-item">Log out</span>
          </a></li>
      </ul>
    </nav>


    <section class="main">
      <div class="users">
        <div class="card">
          <h4>HI THERE!</h4>
          <div class="per">


            <div class="input-box">
              <span class="details">Please Enter Your Organization's/Company Name</span>
              <br>
              <br>
              <input type="text" name="orgname" id="orgname" placeholder="Company name" required>
            </div>
            <button onclick="inquireinfo()">Contractor Info. </button>
            <p id="error_message" style="color: red;"></p>
          </div>
        </div>
        <div class="card">
          <br>
          <br>
          <i class="fas fa-file-alt"></i>

          <h4>Contracts</h4>
          <div class="per">
            <table>
            </table>
          </div>

          <p id="contractcount" class="custom-styling"></p>


        </div>

        <div class="card">
          <br>
          <br>
          <i class="fas fa-project-diagram"></i>
          <h4>PROJECTS</h4>
          <div class="per">
            <table>
            </table>
          </div>

          <p id="projectcount" class="custom-styling"></p>
        </div>
        <div class="card">
          <br>
          <br>
          <i class="fas fa-wrench"></i>
          <h4>Category</h4>
          <div class="per">
            <table>
            </table>
          </div>

          <p id="categorycount" class="custom-styling"></p>
        </div>
        <div class="card">
          <br>
          <br>
          <i class="fas fa-building"></i>
          <h4>Departments</h4>
          <div class="per">
            <table>
            </table>
          </div>

          <p id="departmentcount" class="custom-styling"></p>
        </div>

        <div class="card">
          <br>
          <br>

          <i class="fas fa-balance-scale"></i>
          <h4>Tender Sum.</h4>
          <div class="per">
            <table>
            </table>
          </div>

          <p id="totalsum" class="custom-styling"></p>
        </div>
      </div>


    </section>
  </div>
  <script>
    function inquireinfo() {
      // Get form data
      var username = document.getElementById('orgname').value;

      if (username.trim() === '') {
        document.getElementById("error_message").innerHTML = "Enter Organization name";
        return false;
      }

      // Fetch data from the server using the process_contract_info function
      fetch('/contract_info', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ organization: username }),
      })
        .then(response => response.json())
        .then(data => {
          // Handle the response from the server
          console.log(data);

          // Assuming process_contract_info returns an array with counts
          var [contractCount, totalSum, projectCount, categoryCount, departmentCount] = data;

          // Update HTML elements with the retrieved data
          var contractorCountElement = document.getElementById("contractcount");
          contractorCountElement.innerHTML = parseInt(contractCount, 10);

          var totalSumElement = document.getElementById("totalsum");
          totalSumElement.innerHTML = totalSum;

          var projectCountElement = document.getElementById("projectcount");
          projectCountElement.innerHTML = parseInt(projectCount, 10);

          var categoryCountElement = document.getElementById("categorycount");
          categoryCountElement.innerHTML = parseInt(categoryCount, 10);

          var departmentCountElement = document.getElementById("departmentcount");
          departmentCountElement.innerHTML = parseInt(departmentCount, 10);

          // Assuming process_contract_info also returns an object with error information
          if (data.error) {
            document.getElementById("error_message").innerHTML = data.error;
          } else {
            // Clear any previous error messages
            document.getElementById("error_message").innerHTML = "";
          }
        })
        .catch(error => {
          console.error('Error:', error);
        });
    }
  </script>



</body>

</html>